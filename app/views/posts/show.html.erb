<div class="container">
  <div class="row mb-5">
    <div class="col-md-8 mx-auto">
      <h2  class="mb-5">投稿詳細</h2>
      <div class="mb-3">
        <h3 class="mb-3"><%= @post.title %></h3>
        <p class="mb-3"><%= @post.body %></p>
        <p><%= image_tag @post.image, class: 'post-image' if @post.image.attached? %></p>
      </div>
      <div class="d-flex justify-content-end mb-1">
        <%= link_to '編集', edit_post_path(@post), class: "btn btn-primary mx-3" %>
        <%= link_to '削除', delete_post_path(@post), method: :delete, data: { confirm: '本当に削除しますか？' }, class: "btn btn-danger" %>
      </div>
      <hr class="mt-5" />
    </div>
  </div>
  <div class="row">
    <div class="list-posts col-md-8 mx-auto mb-5">  
      <%= form_with(url: create_comment_path(@post), model: @comment, local: true, method: :post) do |f| %>

        <% if @comment.errors.any? %>
          <ul>
            <% @comment.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        <% end %>
      
        <div class="form-group row mb-3">
          <label class="col-md-2">コメント</label>
          <div class="col-md-10">
            <%= f.text_area :content, value: @comment.content, rows: 3, class: "form-control" %>
          </div>
        </div>
        <div class="d-flex justify-content-end mb-1">
          <%= f.submit "登録", class: "btn btn-primary" %>
        </div>
      <% end %>
      <hr class="mt-5" />
    </div>
  </div>
  <div class="row">
    <div class="list-posts col-md-8 mx-auto">
      <div class="row">
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th width="10%">ID</th>
              <th width="60%">コメント</th>
              <th width="30%">日時</th>
            </tr>
          </thead>
          <tbody>
            <% @comments.each do |comment| %>
              <tr>
                <th><%= comment.id %></th>
                <td><%= comment.content %></td>
                <td><%= comment.created_at.strftime('%Y/%m/%d %H:%M')  %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
